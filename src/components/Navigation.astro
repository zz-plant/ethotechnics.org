---
import NavigationDesktop from "./navigation/NavigationDesktop.astro";
import NavigationMobile from "./navigation/NavigationMobile.astro";
import { navPrimaryLinks, navSections } from "../content/navigation";
import type { NavLink } from "../content/navigation";
import navigationExploreScript from "../scripts/navigation-explore.ts?url";

interface Props {
  currentPath?: string;
}

const { currentPath = Astro.url.pathname } = Astro.props as Props;

const mobileLinks = navPrimaryLinks;
const desktopPrimaryLabels = ["Library", "Diagnostics", "Institute"];
const desktopLinks = desktopPrimaryLabels
  .map((label) => navPrimaryLinks.find((link) => link.label === label))
  .filter((link): link is NavLink => Boolean(link));
const desktopExploreId = "desktop-explore-panel";
---

<nav class="nav" aria-label="Primary" data-nav>
  <div class="nav__inner container">
    <NavigationDesktop
      currentPath={currentPath}
      desktopExploreId={desktopExploreId}
      desktopLinks={desktopLinks}
      navSections={navSections}
    />

    <NavigationMobile currentPath={currentPath} mobileLinks={mobileLinks} />
  </div>
</nav>

<script type="module" src={navigationExploreScript} is:inline></script>
