---
import NavUtilityLinks from "../NavUtilityLinks.astro";
import Search from "../Search.astro";
import type { NavLink } from "../../content/navigation";
import { isCurrentLink, toViewTransitionName } from "../../utils/navigation";

interface Props {
  currentPath: string;
  mobileLinks: NavLink[];
}

const { currentPath, mobileLinks } = Astro.props as Props;
---

<div class="nav__mobile" aria-label="Primary">
  <div class="nav__mobile-row">
    <div class="nav__search-mobile">
      <Search scope="mobile" />
    </div>
    <div class="nav__links nav__links--mobile">
      {
        mobileLinks.map((link) => (
          <a
            class="nav__link"
            href={link.href}
            aria-current={isCurrentLink(link.href, currentPath) ? "page" : undefined}
            style={`view-transition-name: ${toViewTransitionName(
              link.href,
              "mobile",
            )};`}
          >
            {link.label}
          </a>
        ))
      }
    </div>

    <div class="nav__utility nav__utility--mobile">
      <NavUtilityLinks currentPath={currentPath} />
    </div>
  </div>
</div>
