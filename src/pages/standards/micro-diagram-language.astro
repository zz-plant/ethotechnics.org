---
import BaseLayout from "../../layouts/BaseLayout.astro";
import CitationBlock from "../../components/CitationBlock.astro";
import PageIntro from "../../components/PageIntro.astro";
import ScholarlyMeta from "../../components/ScholarlyMeta.astro";
import SectionBlock from "../../components/SectionBlock.astro";

const pageTitle = "Micro-diagram language specification";
const pageDescription =
  "Canonical shapes, line styles, and axes for explaining accountable-system diagrams.";
const permalink = "/standards/micro-diagram-language";
const anchorLinks = [
  { href: "#shapes", label: "Shapes + roles" },
  { href: "#lines", label: "Line styles" },
  { href: "#axes", label: "Axes" },
  { href: "#execution-redress", label: "Execution vs redress" },
  {
    href: "#stoppability-reversibility",
    label: "Stoppability vs reversibility",
  },
  { href: "#citations", label: "Citations" },
];

const publication = {
  authors: [
    {
      name: "Ethotechnics Diagram Council",
      affiliation: "Ethotechnics Institute",
      email: "standards@ethotechnics.org",
    },
  ],
  contact: "standards@ethotechnics.org",
  published: "2026-02-01T00:00:00Z",
  updated: "2026-02-01T00:00:00Z",
  version: "v1.0.0",
  doi: "Pending Zenodo deposit",
  archiveUrl: `https://web.archive.org/save/https://ethotechnics.org${permalink}`,
  changelog: [
    {
      version: "v1.0.0",
      date: "2026-02-01",
      summary:
        "Defined canonical shapes, line semantics, and example diagrams.",
    },
  ],
  license: {
    label: "CC BY 4.0",
    href: "https://creativecommons.org/licenses/by/4.0/",
  },
  attribution:
    "Credit Ethotechnics Institute Diagram Council, include page title + version, and link to the canonical permalink.",
};
---

<BaseLayout
  title={`${pageTitle} — Standards`}
  description={pageDescription}
  mainClass="page page--wide"
>
  <PageIntro
    eyebrow="Standards"
    title={pageTitle}
    description={pageDescription}
    permalink={permalink}
    anchorLinks={anchorLinks}
    panelCopy={{
      eyebrow: "Why this exists",
      title: "Keep diagrams consistent and legible.",
      description:
        "Every diagram should be explainable using this spec alone, with grayscale-friendly symbols and unambiguous roles.",
    }}
  />

  <ScholarlyMeta publication={publication} permalink={permalink} />

  <SectionBlock
    id="shapes"
    eyebrow="Canonical shapes"
    title="Shapes define roles and boundaries."
    description="Use these forms to avoid semantic drift across diagrams."
  >
    <div class="diagram-spec__grid">
      <div class="diagram-spec__card panel">
        <p class="eyebrow">State</p>
        <h3>Rounded rectangle</h3>
        <p class="muted">
          A discrete system state, status, or lifecycle stage.
        </p>
        <figure class="diagram-spec__figure" aria-hidden="true">
          <svg viewBox="0 0 120 60" role="presentation">
            <rect
              x="12"
              y="16"
              width="96"
              height="28"
              rx="10"
              class="diagram-spec__shape"></rect>
          </svg>
        </figure>
      </div>
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Agent</p>
        <h3>Circle</h3>
        <p class="muted">A human, team, or automated agent with agency.</p>
        <figure class="diagram-spec__figure" aria-hidden="true">
          <svg viewBox="0 0 120 60" role="presentation">
            <circle cx="60" cy="30" r="16" class="diagram-spec__shape"></circle>
          </svg>
        </figure>
      </div>
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Boundary</p>
        <h3>Dashed frame</h3>
        <p class="muted">
          A scope boundary for policy, jurisdiction, or system limits.
        </p>
        <figure class="diagram-spec__figure" aria-hidden="true">
          <svg viewBox="0 0 120 60" role="presentation">
            <rect
              x="12"
              y="12"
              width="96"
              height="36"
              rx="8"
              class="diagram-spec__boundary"></rect>
          </svg>
        </figure>
      </div>
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Authority</p>
        <h3>Shield</h3>
        <p class="muted">
          The binding authority that can enforce or reverse outcomes.
        </p>
        <figure class="diagram-spec__figure" aria-hidden="true">
          <svg viewBox="0 0 120 60" role="presentation">
            <path
              d="M60 12 L92 20 L92 36 C92 44 76 52 60 56 C44 52 28 44 28 36 L28 20 Z"
              class="diagram-spec__shape"></path>
          </svg>
        </figure>
      </div>
    </div>
  </SectionBlock>

  <SectionBlock
    id="lines"
    eyebrow="Line styles"
    title="Line semantics denote force, authority, and contingency."
    description="Keep weights consistent and use grayscale-friendly contrast."
    variant="alt"
  >
    <div class="diagram-spec__grid">
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Causal</p>
        <h3>Solid arrow</h3>
        <p class="muted">Shows direct causality or irreversible action.</p>
        <svg
          viewBox="0 0 160 40"
          role="presentation"
          class="diagram-spec__line"
        >
          <defs>
            <marker
              id="diagram-spec-arrow"
              viewBox="0 0 10 12"
              refX="10"
              refY="6"
              markerWidth="10"
              markerHeight="12"
              orient="auto"
            >
              <path d="M0 0 L10 6 L0 12 Z" fill="context-stroke"></path>
            </marker>
          </defs>
          <line
            x1="10"
            y1="20"
            x2="140"
            y2="20"
            class="diagram-spec__arrow"
            marker-end="url(#diagram-spec-arrow)"></line>
        </svg>
      </div>
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Authority</p>
        <h3>Double stroke</h3>
        <p class="muted">Marks decisions that bind policy or governance.</p>
        <svg
          viewBox="0 0 160 40"
          role="presentation"
          class="diagram-spec__line"
        >
          <line x1="10" y1="16" x2="140" y2="16" class="diagram-spec__authority"
          ></line>
          <line x1="10" y1="24" x2="140" y2="24" class="diagram-spec__authority"
          ></line>
        </svg>
      </div>
      <div class="diagram-spec__card panel">
        <p class="eyebrow">Contingent</p>
        <h3>Dashed arrow</h3>
        <p class="muted">Shows a possible, conditional, or reversible path.</p>
        <svg
          viewBox="0 0 160 40"
          role="presentation"
          class="diagram-spec__line"
        >
          <defs>
            <marker
              id="diagram-spec-arrow"
              viewBox="0 0 10 12"
              refX="10"
              refY="6"
              markerWidth="10"
              markerHeight="12"
              orient="auto"
            >
              <path d="M0 0 L10 6 L0 12 Z" fill="context-stroke"></path>
            </marker>
          </defs>
          <line
            x1="10"
            y1="20"
            x2="140"
            y2="20"
            class="diagram-spec__contingent"
            marker-end="url(#diagram-spec-arrow)"></line>
        </svg>
      </div>
    </div>
  </SectionBlock>

  <SectionBlock
    id="axes"
    eyebrow="Axes"
    title="Axes are explicit in every diagram."
    description="Axis labels make time, authority, and burden visible at a glance."
  >
    <ul class="muted">
      <li>
        <strong>Time</strong>: left-to-right (start → completion) with clock
        markers.
      </li>
      <li>
        <strong>Authority</strong>: bottom-to-top (user → system → binding
        authority).
      </li>
      <li>
        <strong>Burden</strong>: thickness or shaded bands show cumulative time
        tax.
      </li>
    </ul>
  </SectionBlock>

  <SectionBlock
    id="execution-redress"
    eyebrow="Example"
    title="Execution vs redress clocks."
    description="Show how system execution can outrun human redress windows."
    variant="alt"
  >
    <div class="diagram-spec__example">
      <figure class="diagram-spec__figure" aria-hidden="true">
        <svg viewBox="0 0 240 120" role="presentation">
          <defs>
            <marker
              id="diagram-spec-arrow"
              viewBox="0 0 10 12"
              refX="10"
              refY="6"
              markerWidth="10"
              markerHeight="12"
              orient="auto"
            >
              <path d="M0 0 L10 6 L0 12 Z" fill="context-stroke"></path>
            </marker>
          </defs>
          <rect
            x="16"
            y="20"
            width="90"
            height="24"
            rx="8"
            class="diagram-spec__shape"></rect>
          <rect
            x="134"
            y="20"
            width="90"
            height="24"
            rx="8"
            class="diagram-spec__shape"></rect>
          <line
            x1="106"
            y1="32"
            x2="134"
            y2="32"
            class="diagram-spec__arrow"
            marker-end="url(#diagram-spec-arrow)"></line>
          <rect
            x="16"
            y="72"
            width="90"
            height="24"
            rx="8"
            class="diagram-spec__boundary"></rect>
          <rect
            x="134"
            y="72"
            width="90"
            height="24"
            rx="8"
            class="diagram-spec__boundary"></rect>
          <line
            x1="106"
            y1="84"
            x2="134"
            y2="84"
            class="diagram-spec__contingent"
            marker-end="url(#diagram-spec-arrow)"></line>
          <text x="16" y="16" class="diagram-spec__label">Execution clock</text>
          <text x="16" y="68" class="diagram-spec__label">Redress clock</text>
        </svg>
      </figure>
      <pre
        class="code-block">&lt;rect class="state" /&gt;
&lt;line class="causal" /&gt;
&lt;rect class="boundary" /&gt;
&lt;line class="contingent" /&gt;</pre>
    </div>
  </SectionBlock>

  <SectionBlock
    id="stoppability-reversibility"
    eyebrow="Example"
    title="Stoppability vs reversibility."
    description="Use a solid stop for immediate halt and a dashed return for reversal windows."
  >
    <div class="diagram-spec__example">
      <figure class="diagram-spec__figure" aria-hidden="true">
        <svg viewBox="0 0 240 120" role="presentation">
          <defs>
            <marker
              id="diagram-spec-arrow"
              viewBox="0 0 10 12"
              refX="10"
              refY="6"
              markerWidth="10"
              markerHeight="12"
              orient="auto"
            >
              <path d="M0 0 L10 6 L0 12 Z" fill="context-stroke"></path>
            </marker>
          </defs>
          <circle cx="40" cy="60" r="16" class="diagram-spec__shape"></circle>
          <rect
            x="92"
            y="48"
            width="80"
            height="24"
            rx="8"
            class="diagram-spec__shape"></rect>
          <line
            x1="56"
            y1="60"
            x2="92"
            y2="60"
            class="diagram-spec__arrow"
            marker-end="url(#diagram-spec-arrow)"></line>
          <line
            x1="172"
            y1="60"
            x2="212"
            y2="60"
            class="diagram-spec__contingent"
            marker-end="url(#diagram-spec-arrow)"></line>
          <text x="24" y="100" class="diagram-spec__label">Stop</text>
          <text x="160" y="100" class="diagram-spec__label">Reverse</text>
        </svg>
      </figure>
      <pre
        class="code-block">&lt;circle class="agent" /&gt;
&lt;rect class="state" /&gt;
&lt;line class="causal" /&gt;
&lt;line class="contingent" /&gt;</pre>
    </div>
  </SectionBlock>

  <SectionBlock
    id="citations"
    eyebrow="Citations"
    title="Cite this diagram language."
    description="Reuse the spec verbatim to keep future visuals aligned."
    variant="alt"
  >
    <CitationBlock
      title={pageTitle}
      permalink={permalink}
      publication={publication}
      citationKey="micro_diagram_language"
      summaryLabel="Cite this diagram language"
    />
  </SectionBlock>
</BaseLayout>
