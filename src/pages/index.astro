---
import { Icon } from 'astro-icon/components';
import BaseLayout from '../layouts/BaseLayout.astro';
import { homeContent } from '../content/home';

const { pageTitle, pageDescription, hero, about, features, highlight, cta } = homeContent;
---
<BaseLayout title={pageTitle} description={pageDescription}>
  <section class="hero">
    <div class="hero__canvas" aria-hidden="true">
      <span class="beam beam--one" />
      <span class="beam beam--two" />
      <span class="beam beam--three" />
      <span class="gridlines" />
    </div>
    <div class="hero__layout">
      <div class="hero__content">
        <p class="eyebrow">{hero.eyebrow}</p>
        <h1>{hero.heading}</h1>
        <p class="muted">{hero.subheadline}</p>
        <p class="lede">{hero.lede}</p>
        <p class="muted">{hero.map}</p>
        <div class="hero__tags" aria-label="Focus areas">
          {hero.metrics.map((metric) => (
            <span class="pill pill--ghost">{metric.value}</span>
          ))}
        </div>
        <div class="actions">
          {hero.actions.map((action) => (
            <a
              class={`button ${action.variant}`}
              href={action.href}
              rel={action.href.startsWith('http') ? 'noreferrer' : undefined}
            >
              {action.icon ? <Icon class="button__icon" name={action.icon} aria-hidden="true" /> : null}
              <span>{action.label}</span>
            </a>
          ))}
        </div>
      </div>
      <div class="hero__panel">
        <div class="panel panel--glass">
          <p class="muted">{hero.panel.title}</p>
          <h3>{hero.panel.description}</h3>
          <ul class="pill-list pill-list--wrap">
            {hero.panel.pills.map((pill) => (
              <li>{pill}</li>
            ))}
          </ul>
        </div>
        <div class="hero__meta" aria-label="Proof points">
          {hero.metrics.map((metric) => (
            <article class="stat-card">
              <div class="stat-card__header">
                {metric.icon ? (
                  <span class="stat-card__icon" aria-hidden="true">
                    <Icon name={metric.icon} />
                  </span>
                ) : null}
                <p class="muted">{metric.label}</p>
              </div>
              <p class="metric">{metric.value}</p>
            </article>
          ))}
        </div>
      </div>
    </div>
  </section>

  <section class="info-strip" aria-label="How this works">
    <p class="eyebrow">How this works</p>
    <p class="muted info-strip__text">
      The Institute library and diagnostics are governed by the
      <a href="/institute">Ethotechnics Institute charter</a>. Content licensed under the
      <a href="https://creativecommons.org/licenses/by/4.0/" rel="noreferrer" target="_blank">
        Creative Commons Attribution 4.0 International License
      </a>.
    </p>
  </section>

  <section id="about" class="section">
    <div class="section__header">
      <p class="eyebrow">{about.eyebrow}</p>
      <h2>{about.heading}</h2>
      <p class="muted">{about.body}</p>
    </div>
    <div class="bento">
      {about.features.map((feature) => (
        <article class="tile">
          <div class="icon" aria-hidden="true">
            {feature.icon ? <Icon name={feature.icon} /> : null}
          </div>
          <div class="tile__body">
            <h3>{feature.title}</h3>
            <p>{feature.description}</p>
          </div>
        </article>
      ))}
    </div>
  </section>

  <section id="features" class="section section--alt">
    <div class="section__header">
      <p class="eyebrow">{features.eyebrow}</p>
      <h2>{features.heading}</h2>
      <p class="muted">{features.body}</p>
    </div>
    <div class="grid grid--two">
      {features.cards.map((feature) => (
        <article
          class={`card${feature.emphasis ? ' card--emphasis' : ''}`}
          aria-label={feature.emphasis ? 'Navigation feature highlight' : undefined}
        >
          <div class="card__glow" aria-hidden="true" />
          <h3>{feature.title}</h3>
          <p>{feature.description}</p>
          {feature.pills ? (
            <ul class="pill-list">
              {feature.pills.map((pill) => (
                <li>{pill}</li>
              ))}
            </ul>
          ) : null}
        </article>
      ))}
    </div>
  </section>

  <section id="insights" class="section highlight">
    <div class="section__header">
      <p class="eyebrow">{highlight.eyebrow}</p>
      <h2>{highlight.heading}</h2>
      <p class="muted">{highlight.body}</p>
    </div>
    <div class="highlight__content">
      <div class="callout">
        <p class="muted">Field note</p>
        <h3>Design for consent, not just conversion.</h3>
        <p>
          Pair clear primary actions with transparent contextâ€”why you are asking, what happens next, and how to opt out.
          Keep navigation labels honest and scannable.
        </p>
      </div>
      <div class="highlight__meta">
        <p class="muted">Built for teams</p>
        <ul class="pill-list pill-list--wrap">
          {highlight.pills.map((pill) => (
            <li>{pill}</li>
          ))}
        </ul>
      </div>
    </div>
  </section>

  <section id="cta" class="cta">
    <div>
      <p class="eyebrow">{cta.eyebrow}</p>
      <h2>{cta.heading}</h2>
      <p class="muted">{cta.body}</p>
    </div>
    <div class="actions">
      {cta.actions.map((action) => (
        <a
          class={`button ${action.variant}`}
          href={action.href}
          rel={action.href.startsWith('http') ? 'noreferrer' : undefined}
        >
          {action.icon ? <Icon class="button__icon" name={action.icon} aria-hidden="true" /> : null}
          <span>{action.label}</span>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
