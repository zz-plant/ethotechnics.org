---
import { getEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import CardGrid from "../components/CardGrid.astro";
import CardItem from "../components/CardItem.astro";
import SectionBlock from "../components/SectionBlock.astro";

const homeEntry = (await getEntry("home", "home"))!;
const { pageTitle, pageDescription } = homeEntry.data;
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  mainClass="page page--wide"
>
  <section class="hero">
    <div class="hero__canvas" aria-hidden="true">
      <span class="beam beam--one"></span>
      <span class="beam beam--two"></span>
      <span class="beam beam--three"></span>
      <span class="gridlines"></span>
    </div>
    <div class="hero__layout">
      <div class="hero__content">
        <p class="eyebrow">Ethotechnics Institute</p>
        <h1>Turn audits into concrete fixes for automated systems.</h1>
        <p class="lede">
          Build governance artifacts your team can run in production: diagnostics, bindings, mechanisms,
          and evidence packs that map directly to review and remediation workflows.
        </p>
        <div class="actions">
          <a class="button primary" href="/diagnostics">
            Run a diagnostic
          </a>
          <a class="button ghost" href="/start-here">
            Start with a pathway
          </a>
        </div>
        <details class="hero__jump-links">
          <summary class="hero__jump-summary">
            <span class="eyebrow">Jump to</span>
            <span class="hero__jump-label">Explore sections</span>
          </summary>
          <ul>
            <li>
              <a class="pill" href="#quickstart">Quickstart</a>
            </li>
            <li>
              <a class="pill" href="#audience">Audience</a>
            </li>
            <li>
              <a class="pill" href="#outputs">Outputs</a>
            </li>
            <li>
              <a class="pill" href="#how-it-works">How it works</a>
            </li>
            <li>
              <a class="pill" href="#difference">Difference</a>
            </li>
            <li>
              <a class="pill" href="#agents">APIs</a>
            </li>
          </ul>
        </details>
        <p class="hero__helper">
          Need a full policy backbone? <a href="/standards">Browse standards</a>. Want remediation-first guidance?
          <a href="/mechanisms">Browse the mechanism library</a>.
        </p>
        <ul class="hero__highlights">
          <li>
            <strong>Diagnostics</strong> Export evidence-ready assessments with stable IDs and change logs.
          </li>
          <li>
            <strong>Bindings</strong> Translate standards into enforceable clauses and procurement language.
          </li>
          <li>
            <strong>Mechanisms</strong> Jump from findings to remediation without context loss.
          </li>
        </ul>
      </div>
      <div class="hero__panel">
        <div class="panel panel--glass">
          <p class="eyebrow">Workflow-ready</p>
          <h2>Attachable outputs, not decks.</h2>
          <p class="muted">
            Diagnostics, findings, clauses, evidence packs, and mechanisms are published as versioned
            artifacts so teams can cite and remediate faster.
          </p>
          <ul class="panel__list">
            <li>Structured outputs that map directly to audit and review checklists.</li>
            <li>Machine-readable artifacts to plug into ticketing, policy, and agent tooling.</li>
            <li>Evidence packs you can reuse across teams without reformatting.</li>
          </ul>
          <a class="button ghost button--compact" href="/api">Reference API</a>
        </div>
      </div>
    </div>
  </section>

  <SectionBlock
    id="quickstart"
    eyebrow="Quickstart"
    title="Produce a governance artifact in under an hour."
    description="Choose a track and hand the output to the people who need evidence, language, or remediation."
  >
    <CardGrid className="grid--two">
      <CardItem
        title="Run a diagnostic"
        description="Export a structured report to attach to a review or audit ticket."
      >
        <a class="button primary button--compact" href="/diagnostics">
          Launch diagnostics
        </a>
        <ul class="muted">
          <li>
            <a href="/diagnostics/evidence-pack-readiness">
              Evidence pack readiness
            </a>
          </li>
          <li>
            <a href="/diagnostics/escalation-coverage-planner">
              Escalation coverage planner
            </a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="Score governance gaps"
        description="Quantify the highest-risk gaps and share a scorecard internally."
      >
        <a
          class="button primary button--compact"
          href="/tools/governance-gap-score"
        >
          Run the gap score
        </a>
        <ul class="muted">
          <li>
            <a href="/tools/governance-gap-score#methodology">Review methodology</a>
          </li>
          <li>
            <a href="/diagnostics">Pair with diagnostics</a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="Attach enforceable clauses"
        description="Hand legal or procurement teams ready-to-use binding language."
      >
        <a class="button primary button--compact" href="/bindings">
          Browse bindings
        </a>
        <ul class="muted">
          <li>
            <a href="/standards">Minimum binding sets</a>
          </li>
          <li>
            <a href="/bundles/procurement-clause-pack">
              Procurement clause pack
            </a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="Align on rollout"
        description="Share your workflow so we can map the right artifacts to your team."
      >
        <a class="button ghost button--compact" href="/participate#intake">
          Share your workflow
        </a>
        <ul class="muted">
          <li>
            <a href="/participate#field-reports">What to send</a>
          </li>
          <li>
            <a href="/participate#feedback">Feedback channels</a>
          </li>
        </ul>
      </CardItem>
    </CardGrid>
  </SectionBlock>

  <SectionBlock
    id="how-it-works"
    eyebrow="How it works"
    title="Go from review to remediation in three moves."
    description="Ethotechnics keeps audits actionable by linking every output to an owner, evidence, and fix."
    variant="alt"
  >
    <ol class="card__list">
      <li>
        <strong>Run a diagnostic.</strong> Capture gaps, owners, and evidence expectations in a structured output.
      </li>
      <li>
        <strong>Bind the obligation.</strong> Map gaps to clauses, standards, or procurement language teams can enforce.
      </li>
      <li>
        <strong>Deploy a mechanism.</strong> Use remediation patterns to close the gap without losing context.
      </li>
    </ol>
  </SectionBlock>

  <SectionBlock
    id="audience"
    eyebrow="Audience selector"
    title="Route to the right artifacts in one click."
    description="Each audience path reorders the stack to match the work you do."
    variant="alt"
  >
    <CardGrid className="grid--two">
      <CardItem
        title="I am building an automated system or agent"
        description="Fast path, mechanisms, and concrete implementation examples."
      >
        <a class="button primary button--compact" href="/start-here?persona=builder">
          Start: Build & ship
        </a>
        <ul class="muted">
          <li>
            <a href="/fast-path">Fast path</a>
          </li>
          <li>
            <a href="/mechanisms">Mechanisms</a>
          </li>
          <li>
            <a href="/examples">Worked examples</a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="I am auditing or governing a system"
        description="Evidence, bindings, and minimum enforceable requirements."
      >
        <a class="button primary button--compact" href="/start-here?persona=auditor">
          Start: Audit & govern
        </a>
        <ul class="muted">
          <li>
            <a href="/evidence-packs">Evidence packs</a>
          </li>
          <li>
            <a href="/bindings">Binding vectors</a>
          </li>
          <li>
            <a href="/standards">Minimum binding sets</a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="I am writing policy or procurement language"
        description="Standards, where they bind, and enforceable clauses."
      >
        <a class="button primary button--compact" href="/start-here?persona=policy">
          Start: Draft policy
        </a>
        <ul class="muted">
          <li>
            <a href="/standards">Standards + clauses</a>
          </li>
          <li>
            <a href="/bindings#procurement">Procurement language</a>
          </li>
          <li>
            <a href="/anti-weaponization">Anti-weaponization constraints</a>
          </li>
        </ul>
      </CardItem>
      <CardItem
        title="I am researching or teaching"
        description="Research, glossary anchors, and mapping artifacts."
      >
        <a class="button primary button--compact" href="/start-here?persona=research">
          Start: Teach & research
        </a>
        <ul class="muted">
          <li>
            <a href="/research">Research</a>
          </li>
          <li>
            <a href="/glossary">Glossary</a>
          </li>
          <li>
            <a href="/field-notes">Field notes</a>
          </li>
        </ul>
      </CardItem>
    </CardGrid>
  </SectionBlock>

  <SectionBlock
    id="outputs"
    eyebrow="What it produces"
    title="Concrete outputs you can attach to existing processes."
    description="Every output is stable, citeable, and built to travel across tickets, audits, and reviews."
  >
    <ul class="card__list">
      <li id="diagnostic-results">
        <a href="/diagnostics">Diagnostic Results</a> → portable artifacts (JSON / PDF) you can attach to tickets,
        audits, and reviews.
      </li>
      <li id="governance-gap-score">
        <a href="/tools/governance-gap-score">Governance Gap Score</a> → shareable scoring tool for governance gaps.
      </li>
      <li id="findings">
        <a href="/api/findings.json">Findings</a> → structured statements of what's wrong, why it matters, and what closes
        the gap.
      </li>
      <li id="standards-clauses">
        <a href="/standards">Standards & Clauses</a> → citeable obligations with stable IDs.
      </li>
      <li id="evidence-packs">
        <a href="/evidence-packs">Evidence Packs</a> → minimum proof required to verify compliance.
      </li>
      <li id="mechanism-library">
        <a href="/mechanisms">Mechanism Library</a> → concrete ways to fix identified gaps.
      </li>
    </ul>
  </SectionBlock>

  <SectionBlock
    id="workflow"
    eyebrow="Where it fits"
    title="Map Ethotechnics to the workflows you already run."
    description="Use the same artifacts across review, policy, red teaming, audit prep, and agent tooling."
  >
    <CardGrid className="grid--two">
      <CardItem
        title="Design review"
        description="Run a diagnostic → attach the result to the review ticket."
      />
      <CardItem
        title="Policy drafting"
        description="Cite clauses → request evidence packs from owners."
      />
      <CardItem
        title="Red teaming"
        description="Generate findings → map to mechanisms for remediation."
      />
      <CardItem
        title="Audit prep"
        description="Use versioned standards → bundle evidence for export."
      />
      <CardItem
        title="Agent tooling"
        description="Consume APIs → emit findings in automated workflows."
      />
    </CardGrid>
  </SectionBlock>

  <SectionBlock
    id="purpose"
    eyebrow="Why it exists"
    title="Enforceability over intent."
    description="Modern systems act faster than they can be contested. Most governance frameworks focus on values, transparency, or intent. Ethotechnics focuses on enforceability: what can be stopped, reversed, evidenced, and repaired."
  />

  <SectionBlock
    id="difference"
    eyebrow="How it's different"
    title="A clear contrast with traditional governance decks."
    description="Designed to augment compliance teams with artifacts they can actually use."
    variant="alt"
  >
    <div class="mapping-table__wrapper">
      <table class="mapping-table mapping-table--compare">
        <thead>
          <tr>
            <th scope="col">This is not</th>
            <th scope="col">This is</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td data-label="This is not">Ethics principles</td>
            <td data-label="This is">Testable obligations</td>
          </tr>
          <tr>
            <td data-label="This is not">Policy PDFs</td>
            <td data-label="This is">Versioned artifacts</td>
          </tr>
          <tr>
            <td data-label="This is not">Review committees</td>
            <td data-label="This is">Diagnostic outputs</td>
          </tr>
          <tr>
            <td data-label="This is not">Trust-based governance</td>
            <td data-label="This is">Evidence-based governance</td>
          </tr>
        </tbody>
      </table>
    </div>
  </SectionBlock>

  <SectionBlock
    id="failure-modes"
    eyebrow="Failure modes"
    title="What happens if you omit this"
    description="Concrete downstream risks when enforceable governance is missing."
  >
    <ul class="card__list">
      <li>Legal exposure from unprovable decision trails.</li>
      <li>Audit failures when evidence packs cannot be produced on demand.</li>
      <li>Operational brittleness when exceptions or overrides are undocumented.</li>
      <li>Reputational risk from silent or unreviewable automated actions.</li>
    </ul>
  </SectionBlock>

  <SectionBlock
    id="agents"
    eyebrow="For agents & tools"
    title="Machine-readable by default."
    description="All standards, clauses, mechanisms, findings, and evidence packs ship as versioned, machine-readable objects with stable IDs."
  >
    <ul class="card__list">
      <li>
        <a href="/api">Reference API</a>
      </li>
      <li>
        <a href="/api#objects">Object model</a>
      </li>
      <li>
        <a href="/agents/spec">Agent Safety Object Model</a>
      </li>
      <li>
        <a href="/api/releases.json">Releases</a>
      </li>
    </ul>
  </SectionBlock>

  <SectionBlock
    id="limits"
    eyebrow="What it does not do"
    title="Clear boundaries to reduce scope anxiety."
    description="Ethotechnics is a tool for governance operations, not a certification or moral framework."
    variant="alt"
  >
    <ul class="card__list">
      <li>Does not certify systems as 'ethical.'</li>
      <li>Does not replace legal compliance.</li>
      <li>Does not decide moral tradeoffs.</li>
      <li>Does not require organizational buy-in to use.</li>
    </ul>
  </SectionBlock>
</BaseLayout>
